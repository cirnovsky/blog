"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","isindex","keygen","link","menuitem","meta","nextid","param","source","track","wbr"],t=/\s([^'"\s><=]+)(?:\s*=\s*(['"])([^]*?)\2)?/g,n=function(n){var r={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},i=n.match(/<\/?([^\s]+?)[/\s>]/);if(i&&(r.name=i[1],r.voidElement=e.includes(i[1])||"/"===n.charAt(n.length-2),r.name.startsWith("!--"))){var a=n.indexOf("--\x3e");return{type:"comment",comment:-1!==a?n.slice(4,a):""}}for(var c=new RegExp(t),s=null;null!==(s=c.exec(n));)if(s[0].trim()){var o=s[1],m=s[3];o&&void 0!==m&&(r.attrs[o]=m)}return r},r=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,i=/^\s*$/,a=Object.create(null);function c(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(e){var t=[];for(var n in e)t.push(n+'="'+e[n]+'"');return t.length?" "+t.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(c,"")+"</"+t.name+">";case"comment":return e+"\x3c!--"+t.comment+"--\x3e";default:return""}}exports.htmlVoidElements=e,exports.parse=function(e,t){void 0===t&&(t={}),t||(t={}),t.components||(t.components=a);var c,s=[],o=[],m=-1,u=!1;if(0!==e.indexOf("<")){var l=e.indexOf("<");s.push({type:"text",content:-1===l?e:e.substring(0,l)})}return e.replace(r,(function(r,a){if(u){if(r!=="</"+c.name+">")return"";u=!1}var l,d="/"!==r.charAt(1),h=r.startsWith("\x3c!--"),p=a+r.length,f=e.charAt(p);if(h){var v=n(r);return m<0?(s.push(v),s):((l=o[m])&&l.children&&Array.isArray(l.children)&&l.children.push(v),s)}if(d&&(m++,"tag"===(c=n(r)).type&&c.name&&t.components&&t.components[c.name]&&(c.type="component",u=!0),!c.voidElement&&!u&&f&&"<"!==f&&Array.isArray(c.children)&&c.children.push({type:"text",content:e.slice(p,e.indexOf("<",p))}),0===m&&s.push(c),(l=o[m-1])&&l.children&&l.children.push(c),o[m]=c),(!d||c.voidElement)&&(m>-1&&(c.voidElement||c.name===r.slice(2,-1))&&(m--,c=-1===m?s:o[m]),!u&&"<"!==f&&f)){l=-1===m?s:o[m].children;var x=e.indexOf("<",p),y=e.slice(p,-1===x?void 0:x);i.test(y)&&(y=" "),(x>-1&&m+l.length>=0||" "!==y)&&l&&Array.isArray(l)&&l.push({type:"text",content:y})}})),s},exports.stringify=function(e){return e.reduce((function(e,t){return e+c("",t)}),"")};
//# sourceMappingURL=html-to-ast.cjs.production.min.js.map
